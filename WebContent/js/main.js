function setUp(){$("#rtdmform").submit(function(){return onRequest(),!1}),$("pre.js").snippet("javascript",{style:"ide-eclipse",transparent:!0,collapse:!0}),$("#settingsaccordion").accordion({heightStyle:"content"}),$("#manageArrayContent").dialog({autoOpen:!1,height:400,width:350,modal:!0,buttons:{Apply:function(){requestTemplate.InputVariables[openListIndexToEdit].valueList=openListToEdit.slice(0),openListToEdit=void 0,openListIndexToEdit=void 0,render(),$(this).dialog("close")}},close:function(){openListToEdit=void 0,openListIndexToEdit=void 0}}),render()}function render(){$("#eventname").val(requestTemplate.Configuration.eventName),$("#hostip").val(requestTemplate.Configuration.rdmHost),$("#hostport").val(requestTemplate.Configuration.rdmPort),$("#vardatatype_input").html(""),$("#vardatatype_output").html("");for(var a=0;a<supportedDatatypes.length;a++)$("#vardatatype_input").append('<option value="'+supportedDatatypes[a]+'">'+supportedDatatypes[a]+"</option>"),$("#vardatatype_output").append('<option value="'+supportedDatatypes[a]+'">'+supportedDatatypes[a]+"</option>");$("#invartable").html('<tr><th width="20%" scope="col">Datatype</th><th width="35%" scope="col">Name</th><th width="35%" scope="col">Value</th><th width="10%" scope="col"></th></tr>');for(var b=0;b<requestTemplate.InputVariables.length;b++)addInputVariable(b,requestTemplate.InputVariables[b].name,requestTemplate.InputVariables[b].type,requestTemplate.InputVariables[b].value,requestTemplate.InputVariables[b].valueList);$("#outvartable").html('<th width="20%" scope="col">Datatype</th><th width="70%" scope="col">Name</th><th width="10%" scope="col"></th>');for(var c=0;c<requestTemplate.OutputVariables.length;c++)addOutputVariable(c,requestTemplate.OutputVariables[c].name,requestTemplate.OutputVariables[c].type)}function addInputVariable(a,b,c,d,e){c.indexOf("-List")>0?(itemCount=0,void 0!==e&&"[object Array]"===Object.prototype.toString.call(e)&&(itemCount=e.length),$("#invartable").append('<tr align="center" class="invardeclartion"><td>'+c+"</td>"+'<td> <input name="varname" value="'+b+'" type="text" size="30" required="required" onChange="onChangeVariable(this,'+a+', true);"/></td>'+"<td> <p onClick=\"onEditListContent('"+a+"');\"> List contains "+itemCount+" items </p> </td>"+'<td align="center"><a href="#" onClick="onRemoveVariable(\'input\',\''+a+'\');" class="deleteBtn">'+'<img height="16px" src="./img/pixel.png"/></a></td>'+"</tr>")):$("#invartable").append('<tr align="center" class="invardeclartion"><td>'+c+"</td>"+'<td> <input name="varname" value="'+b+'" type="text" size="30" required="required" onChange="onChangeVariable(this,'+a+', true);"/></td>'+'<td> <input name="varvalue" value="'+d+'" type="text" size="30" required="required" onChange="onChangeVariable(this,'+a+');"/></td>'+'<td align="center"><a href="#" onClick="onRemoveVariable(\'input\',\''+a+'\');" class="deleteBtn">'+'<img height="16px" src="./img/pixel.png"/></a></td>'+"</tr>")}function addOutputVariable(a,b,c){$("#outvartable").append('<tr align="center" class="outvardeclartion"><td>'+c+"</td>"+'<td> <input name="varname" value="'+b+'" type="text" size="65" required="required" onChange="onChangeVariable(this,'+a+');"/></td>'+'<td align="center"><a href="#" onClick="onRemoveVariable(\'output\',\''+a+'\');" class="deleteBtn">'+'<img height="16px" src="./img/pixel.png"/></a></td>'+"</tr>")}function onAddVariable(a){if("input"===a){var b=new Object;b.name="",b.type=$("#vardatatype_input").val(),b.type.indexOf("-List")>0?b.valueList=new Array:b.value="",requestTemplate.InputVariables.push(b)}else if("output"===a){var b=new Object;b.name="",b.type=$("#vardatatype_output").val(),b.type.indexOf("-List")>0?b.valueList=new Array:b.value="",requestTemplate.OutputVariables.push(b)}render()}function onRemoveVariable(a,b){"input"===a?requestTemplate.InputVariables.splice(b,1):requestTemplate.OutputVariables.splice(b,1),render()}function onChangeVariable(a,b,c){var d=$(a).attr("name"),e=$(a).val();"varname"==d?c?requestTemplate.InputVariables[b].name=e:requestTemplate.OutputVariables[b].name=e:"varvalue"==d?requestTemplate.InputVariables[b].value=e:"eventname"==d?requestTemplate.Configuration.eventName=e:"hostip"==d?requestTemplate.Configuration.rdmHost=e:"hostport"==d&&(requestTemplate.Configuration.rdmPort=e),render()}function onRequest(){console.log("Sending Request:  "+JSON.stringify(requestTemplate)),$.ajax("/RDMServiceAdapter/services/adapter/",{type:"POST",contentType:"application/json",data:JSON.stringify(requestTemplate),success:function(a){$("#codeframe").html('<h4 class="title">Service Response</h4><pre class="js">var responseObj = '+JSON.stringify(a,void 0,2)+"; "+"</pre>"),$("pre.js").snippet("javascript",{style:"ide-eclipse",transparent:!1,collapse:!1})},error:function(a,b,c){alert("Test request failed with error: "+c)}})}function onResponseSuccess(a){alert("Request succeeded: \n"+JSON.stringify(a))}function onResponseFailure(a){alert("Request failed: \n"+JSON.stringify(a))}function buildRequestSnippet(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);var a="// add jquery library to your website \nvar requestObj = "+JSON.stringify(requestTemplate,void 0,2)+";\n"+"$.ajax('"+window.location.origin+"/RDMServiceAdapter/services/adapter/', {\n"+"  type: 'POST',\n"+"  contentType: 'application/json',\n"+"  crossDomain: true,\n"+"  data: JSON.stringify(requestObj),\n"+"  success: function (responseObj) {\n"+"    // add your code here to process response.\n"+"    alert('Request successfull.');\n"+"  }\n"+"});\n";$("#codeframe").html('<h4 class="title">Request Template</h4><pre class="js">'+a+"</pre>"),$("pre.js").snippet("javascript",{style:"ide-eclipse",transparent:!1,collapse:!1})}function onEditListContent(a){openListIndexToEdit=a,openListToEdit=requestTemplate.InputVariables[openListIndexToEdit].valueList.slice(0),renderContentList(),$("#manageArrayContent").dialog("open")}function addItemToList(){var a=$("#newArrayItem").val();return""===a?!1:(openListToEdit.push(a),$("#newArrayItem").val(""),renderContentList(),!1)}function removeItemFromList(a){openListToEdit.splice(a,1),renderContentList()}function moveItemInList(a,b){var c=openListToEdit.length-1;if("top"==a){var d=b-1;0>d&&(d=c);var e=openListToEdit[d];openListToEdit[d]=openListToEdit[b],openListToEdit[b]=e}else{var f=b+1;f>c&&(f=0);var e=openListToEdit[f];openListToEdit[f]=openListToEdit[b],openListToEdit[b]=e}renderContentList()}function renderContentList(){$("#arrayContentTable").html("");for(var a=0;a<openListToEdit.length;a++)$("#arrayContentTable").append("<tr><td> "+openListToEdit[a]+"</td>"+'<td width="5%"><a href="#" onClick="moveItemInList(\'top\','+a+')"><img src="./img/arrow_up.png"/></a></td>'+'<td width="5%"><a href="#" onClick="moveItemInList(\'down\','+a+')"><img src="./img/arrow_down.png"/></a></td>'+'<td width="5%"><a href="#" onClick="removeItemFromList(\''+a+'\');" class="deleteBtn"> <img height="16px" src="./img/pixel.png"/></a></td>'+"</tr>")}var supportedDatatypes=["String","Double","Integer","Long","Boolean","String-List","Double-List","Integer-List","Long-List","Boolean-List"],openListToEdit=void 0,openListIndexToEdit=void 0,requestTemplate={Configuration:{eventName:"Score ausgeben",rdmHost:"gersasci61.ger.sas.com",rdmPort:8680,identifier:"SAS_IDENT",timezone:"GMT"},InputVariables:[{name:"INDIVID",type:"Long",value:"9859"},{name:"CustomerSegment",type:"String",value:"GOLD_SEGMENT"},{name:"WriteContactHistory",type:"Boolean",value:"true"},{name:"Products",type:"String-List",valueList:["Shampoo","Nivea","AXE","Hugo Boss","Loreal"]}],OutputVariables:[{name:"Score1",type:"Double"},{name:"Score2",type:"Double"},{name:"Score3",type:"Double"}]};